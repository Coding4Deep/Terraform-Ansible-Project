# Springboot Fullstack Infrastructure Automation with Terraform + Ansible

---

##  Project Overview

This project demonstrates **fully automated infrastructure provisioning and configuration** for a full-stack Spring Boot web application using:

* **Terraform**: to provision AWS infrastructure (VPC, Subnets, EC2 instances, Security Groups, SSH Key, etc.)
* **Ansible**: to install and configure required software on provisioned instances (Tomcat, Memcached, RabbitMQ, MongoDB)
* **AWS EC2 Dynamic Inventory Plugin**: to avoid hardcoding any IP addresses; Ansible automatically discovers instances using AWS Tags.

With this project, anyone can provision infrastructure and configure services in a fully automated, repeatable, idempotent way.

---

## ðŸŒ Tech Stack Used

| Layer                        | Technology    |
| ---------------------------- | ------------- |
| Infrastructure Provisioning  | Terraform     |
| Infrastructure Configuration | Ansible       |
| Cloud Provider               | AWS           |
| Application Server           | Apache Tomcat |
| Database                     | MongoDB       |
| Caching                      | Memcached     |
| Messaging Queue              | RabbitMQ      |

---

## ðŸŽ“ Who Can Use This Project?

* DevOps Beginners
* Cloud Enthusiasts
* Developers who want to learn Infrastructure-as-Code
* System Administrators
* Anyone who wants to learn full automation using **Terraform + Ansible**

---

## ðŸ”§ Prerequisites

Make sure you have following tools installed in your machine:

1. **Terraform**

   * [Terraform Installation Guide](https://developer.hashicorp.com/terraform/tutorials/aws-get-started/install-cli)
2. **Ansible**

   * [Ansible Installation Guide](https://docs.ansible.com/ansible/latest/installation_guide/intro_installation.html)
3. **AWS CLI**

   * [AWS CLI Installation Guide](https://docs.aws.amazon.com/cli/latest/userguide/getting-started-install.html)
4. **Python Boto3 Module (for Ansible AWS Plugin)**

   ```bash
   pip install boto3 botocore
   ```
5. **AWS Account** with Access Key and Secret Key configured:

   ```bash
   aws configure
   ```

---

## ðŸ”§ AWS Resources Provisioned

* VPC
* Public Subnet
* Private Subnet
* Security Groups
* EC2 Instances:

  * Public EC2 (Tomcat Server)
  * Private EC2 (Memcached)
  * Private EC2 (RabbitMQ)
  * Private EC2 (MongoDB)
* SSH Key Pair

---

## ðŸ” Complete Project Structure

```
project-root/
â”‚
â”œâ”€â”€ terraform/
â”‚   â”œâ”€â”€ provider.tf
â”‚   â”œâ”€â”€ variables.tf
â”‚   â”œâ”€â”€ main.tf
â”‚   â”œâ”€â”€ outputs.tf
â”‚
â”œâ”€â”€ ansible/
â”‚   â”œâ”€â”€ inventory/
â”‚   â”‚   â””â”€â”€ aws_ec2.yaml
â”‚   â”œâ”€â”€ ansible.cfg
â”‚   â”œâ”€â”€ playbooks/
â”‚   â”‚   â”œâ”€â”€ site.yml
â”‚   â”‚   â”œâ”€â”€ tomcat.yml
â”‚   â”‚   â”œâ”€â”€ memcached.yml
â”‚   â”‚   â”œâ”€â”€ rabbitmq.yml
â”‚   â”‚   â””â”€â”€ mongo.yml
â”‚
â””â”€â”€ project.pem (auto-generated by Terraform)
```

---

## ðŸŽ¯ End-to-End Usage Guide

### Step 1: Clone the Project Repository

```bash
git clone https://github.com/your-username/your-repo-name.git
cd your-repo-name
```

### Step 2: Generate SSH Key Pair (once)

You need a public-private key pair to SSH into your instances.

```bash
cd terraform/
ssh-keygen -t rsa -b 4096 -f project-key
```

This will create:

* `project-key` (private key)
* `project-key.pub` (public key)

Terraform will automatically upload this public key to AWS.

### Step 3: Update Terraform Configuration

* Update `provider.tf` with your AWS region.
* Replace `ami-xxxxxxxx` with valid Ubuntu AMI ID from your region.

You can find Ubuntu AMI IDs here:

* [Ubuntu AMIs](https://cloud-images.ubuntu.com/locator/)

### Step 4: Apply Terraform to Create Infrastructure

```bash
terraform init
terraform apply
```

âœ… Terraform will create the entire AWS infrastructure.
âœ… After provisioning is done, Terraform automatically triggers Ansible via `null_resource` to configure all servers.

> **Note:** You may be prompted for approval during `terraform apply`.

### Step 5: Ansible Dynamic Inventory Setup

Ensure you have valid AWS credentials locally (`~/.aws/credentials`).

The file `ansible/inventory/aws_ec2.yaml` uses AWS EC2 dynamic inventory plugin to auto-discover EC2 instances using tags.

You can test Ansible inventory:

```bash
cd ../ansible/
ansible-inventory --graph
```

You should see:

```
@all:
  |--@aws_ec2:
    |--@role_tomcat:
    |  |--springboot-public
    |--@role_memcached:
    |  |--springboot-memcached
    |--@role_rabbitmq:
    |  |--springboot-rabbitmq
    |--@role_mongo:
    |  |--springboot-mongo
```

No IP addresses needed. Fully dynamic!

### Step 6: Run Ansible Playbooks Manually (optional)

If you want to re-run Ansible manually anytime:

```bash
ansible-playbook playbooks/site.yml
```

This will execute all roles (tomcat, memcached, rabbitmq, mongo).

---

## ðŸ“Š What Happens During Provisioning?

| Component          | Action                                                           |
| ------------------ | ---------------------------------------------------------------- |
| Terraform          | Provisions VPC, Subnets, EC2 Instances, Security Groups, SSH Key |
| Ansible            | Dynamically discovers EC2 instances via AWS tags                 |
| Tomcat Playbook    | Installs Java, Downloads and Configures Apache Tomcat            |
| Memcached Playbook | Installs and Starts Memcached Service                            |
| RabbitMQ Playbook  | Installs and Starts RabbitMQ Server                              |
| MongoDB Playbook   | Adds official MongoDB repo, Installs MongoDB, Starts MongoDB     |

---

## ðŸš¨ Cleaning Up Resources

After you're done, it's important to destroy the infrastructure to avoid AWS charges:

```bash
cd terraform/
terraform destroy
```

---

## ðŸš€ Future Enhancements (Optional Improvements)

* Add NAT Gateway for better private subnet access
* Use Bastion Host for secure SSH into private instances
* Fully private subnets with no public IPs
* Jenkins CI/CD integration for full automation pipeline
* Monitoring with CloudWatch
* HTTPS with ACM and Load Balancer

---

## ðŸ”— Credits

Created by \[Your Name]. Open-source project to help anyone learn cloud provisioning and automation.

---

## ðŸ“… License

This project is open-source and available under MIT License.

---
